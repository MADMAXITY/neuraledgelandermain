{
  "meta": {
    "instanceId": "cd9bb7894b11bab249a60976239056d06e4831b51d7348f6790a85241c21fc56",
    "templateCredsSetupCompleted": true
  },
  "nodes": [
    {
      "id": "2cf75639-0528-49cc-85f5-37f0b5e27596",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -32,
        -368
      ],
      "parameters": {
        "color": 4,
        "width": 512,
        "height": 272,
        "content": "## üéØ **Goal: Test Your Discord Connection**\nThis workflow demonstrates advanced Discord bot capabilities:\n‚úì Fetch ALL channels from your Discord server at once\n‚úì Automatically separate text channels from categories\n‚úì Merge channel data with category metadata\n‚úì Prepare structured data for bulk operations\n\nPerfect for: Building multi-channel bots, server management automation, \nand advanced Discord integrations.\n\nWhat you'll learn: Channel enumeration, conditional logic, data merging, \nand preparing for bulk message operations."
      },
      "typeVersion": 1
    },
    {
      "id": "7cd1a882-fa13-4636-8a32-e21a4bd76989",
      "name": "Sticky Note1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -32,
        400
      ],
      "parameters": {
        "color": 7,
        "width": 960,
        "height": 432,
        "content": "## üí° **Setup: Get Discord Credentials**\n\n\n\n\n"
      },
      "typeVersion": 1
    },
    {
      "id": "5257df00-7033-46a6-9444-0b8858658548",
      "name": "Sticky Note5",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        960,
        -384
      ],
      "parameters": {
        "width": 928,
        "height": 528,
        "content": "## üåü Customization Guide.\n\n"
      },
      "typeVersion": 1
    },
    {
      "id": "d9164460-ea58-4030-ac85-b3fc7b22ed2a",
      "name": "Sticky Note6",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        960,
        160
      ],
      "parameters": {
        "color": 7,
        "width": 624,
        "height": 672,
        "content": "## ‚öôÔ∏è Workflow Configuration\n### Get Server ID:\n  ‚Ä¢ Enable Developer Mode: Discord Settings ‚Üí Advanced ‚Üí ‚òë Developer Mode\n  ‚Ä¢ Right-click your server icon ‚Üí Copy Server ID\n  ‚Ä¢ Example format: 012345678911121314(18-19 digit number)\n### Configure \"Set - Server ID\" Node:\n  1. Open the \"Set - Server ID\" node\n  2. Replace the server_id value with YOUR server ID\n  3. Keep the field name as \"server_id\" (used by next node)\n### Configure \"Get channels list\" Node:\n  ‚Ä¢ Credential: Select \"Testing\" (or your credential name)\n  ‚Ä¢ Guild ID: Uses ={{ $json.server_id }} (from previous node)\n  ‚Ä¢ Limit: 20 (increase if you have more than 20 channels)\n  ‚Ä¢ Returns ALL channel types: Text, Voice, Categories, Forums\n### Understanding the Flow:\n  üìå \"Separate Category & Channel\" checks parent_id:\n     ‚Ä¢ Has parent_id = Text Channel ‚Üí Goes to \"Get Channels\"\n     ‚Ä¢ No parent_id = Category ‚Üí Goes to \"Get Server's Categories\"\n\n  üìå \"Merge\" combines both paths:\n     ‚Ä¢ Matches channels to their parent categories\n     ‚Ä¢ Creates complete channel + category metadata\n     ‚Ä¢ Output: [{ channel_name, channe_id, category_name, category_id, last_message_id }]\n### Test the Workflow:\n  1. Click \"Execute workflow\" (top-right)\n  2. Check each node for green success checkmarks\n  3. Click \"Merge\" node ‚Üí View output to see combined data\n  4. You should see channels grouped by category"
      },
      "typeVersion": 1
    },
    {
      "id": "a162b3c2-b458-4cd5-b589-51df7317086f",
      "name": "Sticky Note11",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -576,
        -304
      ],
      "parameters": {
        "color": 5,
        "width": 512,
        "height": 560,
        "content": "## ü§î Troubleshooting Guide\n### Error 401 (Invalid Token):\n  Problem: Your Bot Token in n8n is wrong\n  ‚úì Fix: Reset token in Discord Developer Portal ‚Üí Bot ‚Üí Reset Token\n  ‚úì Update your n8n credential with new token\n### Error 403 (Missing Access):\n  Problem: Bot doesn't have View Channels permission\n  ‚úì Fix: Server Settings ‚Üí Roles ‚Üí Enable \"View Channels\" for bot role\n  ‚úì Check channel-specific permissions if needed\n### Error 404 (Not Found):\n  Problem: Server (ID) is incorrect\n  ‚úì Fix: Double-check Server (ID) in \"Set - Server ID\" node\n  ‚úì Enable Developer Mode: Settings > Advanced > Developer Mode\n  ‚úì Right-click server ‚Üí Copy Server ID\n### Empty Results from \"Get channels list\":\n  Problem: Bot not in server or no channels visible\n  ‚úì Fix: Verify bot is invited to the server\n  ‚úì Check bot can see at least one channel\n  ‚úì Ensure limit is set high enough (default: 20)\n### Merge Node Returns No Data:\n  Problem: category_id mismatch between branches\n  ‚úì Fix: Check \"Get Channels\" has parent_id ‚Üí category_id\n  ‚úì Verify \"Get Server's Categories\" has matching category_id"
      },
      "typeVersion": 1
    },
    {
      "id": "b7444a18-f092-41e6-8f28-4a019fe3eef1",
      "name": "Sticky Note2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        0,
        496
      ],
      "parameters": {
        "width": 272,
        "height": 288,
        "content": "### Part 1: Create Bot & Get Token\n  1. Go to Discord Developer Portal ‚Üí Applications\n  2. Click \"New Application\" ‚Üí Name your bot\n  3. Navigate to \"Bot\" tab ‚Üí Click \"Add Bot\"\n  4. Under Token section ‚Üí Click \"Reset Token\"\n  5. COPY THE TOKEN IMMEDIATELY (you won't see it again!)\n  6. Keep this token secure - treat it like a password"
      },
      "typeVersion": 1
    },
    {
      "id": "7238a674-f1ef-4dba-8890-52742cc308f4",
      "name": "Sticky Note3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        288,
        480
      ],
      "parameters": {
        "width": 288,
        "height": 320,
        "content": "### Part 2: Invite Bot to Your Server\n  1. Go to OAuth2 ‚Üí URL Generator\n  2. Scopes section: ‚òë bot\n  3. Bot Permissions: \n     ‚òë View Channels (required for v1.2)\n     ‚òë Read Message History (for future extensions)\n     ‚òë Send Messages (if you add messaging later)\n  4. Copy the generated URL\n  5. Paste in browser ‚Üí Select your server ‚Üí Authorize\n  6. Verify bot appears in member list (may show as offline)"
      },
      "typeVersion": 1
    },
    {
      "id": "8d113480-89c5-465b-9f05-bc8e8eeba211",
      "name": "Sticky Note4",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        592,
        496
      ],
      "parameters": {
        "width": 304,
        "height": 288,
        "content": "### Part 3: Add Credentials to n8n\n  1. In n8n: Click \"Credentials\" (top-right) ‚Üí Create New\n  2. Search for \"Discord Bot API\" ‚Üí Select it\n  3. Credential Name: \"Testing\" (or match what's in workflow)\n  4. Bot Token field: Paste the token from Part 1\n  5. Click \"Save\" ‚Üí Test connection if available\n  6. Use this credential in all Discord nodes"
      },
      "typeVersion": 1
    },
    {
      "id": "947ad189-629a-498f-8e92-ad36a58ef4fd",
      "name": "Set - Server ID",
      "type": "n8n-nodes-base.set",
      "position": [
        192,
        -64
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "faa25e7c-59d3-4477-a029-c72ecc8ac860",
              "name": "server_id",
              "type": "string",
              "value": "={{ $json.server_id || \"Server ID\"}}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "9d4e20eb-6f49-4106-826d-8188df5762d4",
      "name": "Get Server's Categories",
      "type": "n8n-nodes-base.set",
      "position": [
        560,
        160
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "60c38119-9db5-4eae-a414-321eddc7634e",
              "name": "category_id",
              "type": "string",
              "value": "={{ $json.id }}"
            },
            {
              "id": "1ae100b1-3e04-4eec-9181-04b274ab73a0",
              "name": "category_name",
              "type": "string",
              "value": "={{ $json.name }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "65992ac6-8f49-463d-a5eb-7c6ae91edfd2",
      "name": "Get Channels",
      "type": "n8n-nodes-base.set",
      "position": [
        560,
        -96
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "a55e56b6-13f0-469a-b776-e0414822f272",
              "name": "channe_id",
              "type": "string",
              "value": "={{ $json.id }}"
            },
            {
              "id": "ae72b909-2115-471a-bc7d-0e1c2e40b041",
              "name": "channel_name",
              "type": "string",
              "value": "={{ $json.name }}"
            },
            {
              "id": "7b2bb958-ac46-4993-84a4-18ddfe178f81",
              "name": "category_id",
              "type": "string",
              "value": "={{ $json.parent_id }}"
            },
            {
              "id": "1ab3b201-9817-4815-8653-68776de4529a",
              "name": "last_message_id",
              "type": "string",
              "value": "={{ $json.last_message_id }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "16d6cb20-01ff-445c-9141-8fd5b6e534a0",
      "name": "Merge",
      "type": "n8n-nodes-base.merge",
      "position": [
        752,
        32
      ],
      "parameters": {
        "mode": "combine",
        "options": {},
        "fieldsToMatchString": "category_id"
      },
      "typeVersion": 3.2
    },
    {
      "id": "5cab8a2c-7c05-4bf9-96a0-e342c33d121f",
      "name": "Separate Category & Channel",
      "type": "n8n-nodes-base.if",
      "position": [
        384,
        32
      ],
      "parameters": {
        "options": {},
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "fda5a320-ba7f-4992-a5f5-6a46b068e260",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              },
              "leftValue": "={{$input.item.json.parent_id}}",
              "rightValue": ""
            }
          ]
        }
      },
      "typeVersion": 2.2
    },
    {
      "id": "dde1d5e6-3ee6-4d68-8e92-05a54ad36f6f",
      "name": "Get channels list",
      "type": "n8n-nodes-base.discord",
      "position": [
        192,
        160
      ],
      "webhookId": "1dffb8cd-24f6-4699-a2cd-b900b400e0cd",
      "parameters": {
        "limit": 20,
        "guildId": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $json.server_id}}"
        },
        "options": {},
        "operation": "getAll"
      },
      "credentials": {
        "discordBotApi": {
          "id": "9weStIMkdP3A792V",
          "name": "Template"
        }
      },
      "typeVersion": 2
    },
    {
      "id": "2db98987-f832-4fe9-a472-939e999f0b34",
      "name": "Next Step !",
      "type": "n8n-nodes-base.noOp",
      "position": [
        768,
        240
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "e8bbcf8e-e95d-4103-9a8f-1faa7988b1df",
      "name": "When clicking ‚ÄòExecute workflow‚Äô",
      "type": "n8n-nodes-base.manualTrigger",
      "position": [
        -16,
        -64
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "aad42190-9fa4-4d9d-8fad-223e2f2ae766",
      "name": "Sticky Note7",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -576,
        272
      ],
      "parameters": {
        "width": 512,
        "height": 560,
        "content": "## üôè Thank You for Trying This Workflow!\nYour time and trust mean a lot! I truly appreciate you using this \nadvanced Discord template.\n### Your feedback shapes future updates:\n- üí° Suggestions for improvement\n- üÜï Ideas for new features  \n- üìù Requests for other automation workflows\n#### Please share your thoughts! Every idea helps shape the next update.\n### üôã‚Äç‚ôÇÔ∏è Join & Follow For More Free Templates!\n- #### Discord Community: We Work Together\n‚Üí https://discord.gg/sEHaKcqBWY\nGet help, share builds, collaborate!\n- #### Facebook Fanpage: Automation Together\n‚Üí facebook.com/profile.php?id=61581574203648\n  Daily tips, tutorials, and updates\n- #### Youtube Channel: Automation Together\n‚Üí youtube.com/@AutomationTogether\nVideo guides for all templates\n### Thank you again for being part of this journey! üöÄ\n### Together, we automate better! ü§ñ‚ú®"
      },
      "typeVersion": 1
    },
    {
      "id": "e53db057-8a54-4547-9634-9abaf960ef8c",
      "name": "When Executed by Another Workflow",
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "position": [
        -16,
        144
      ],
      "parameters": {
        "workflowInputs": {
          "values": [
            {
              "name": "server_id"
            }
          ]
        }
      },
      "typeVersion": 1.1
    },
    {
      "id": "47076256-50ff-499e-85a0-2a4075df5479",
      "name": "Sticky Note8",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        992,
        -336
      ],
      "parameters": {
        "width": 400,
        "height": 112,
        "content": "### **Change Server ID:**\n  ‚Ä¢ Update \"Set - Server ID\" node with different server\n  ‚Ä¢ Bot must be invited to that server first\n  ‚Ä¢ You can duplicate workflow for multiple servers"
      },
      "typeVersion": 1
    },
    {
      "id": "401028dc-b871-4d42-b75c-9f148a91538c",
      "name": "Sticky Note10",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        992,
        -208
      ],
      "parameters": {
        "width": 400,
        "height": 128,
        "content": "### **Advanced: Multi-Server Operations:**\n  1. Replace \"Set - Server ID\" with \"Code\" node\n  2. Create array: [server_id_1, server_id_2, ...]\n  3. Add \"Loop Over Items\" before \"Get channels list\"\n  4. Process multiple servers in one execution"
      },
      "typeVersion": 1
    },
    {
      "id": "806b1acf-1261-4f3f-9727-05aa0267c88b",
      "name": "Sticky Note12",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        992,
        -64
      ],
      "parameters": {
        "width": 400,
        "height": 192,
        "content": "### **Pro Tips:**\n  ‚ö†Ô∏è Known Issue: \"channe_id\" has typo (missing 'l')\n     ‚Ä¢ Keep it for compatibility with existing workflows\n     ‚Ä¢ Or fix: Change in \"Get Channels\" node to \"channel_id\"\n  \n  üí° The parent_id logic is clever:\n     ‚Ä¢ Categories have no parent (they ARE parents)\n     ‚Ä¢ Text channels reference their category as parent\n     ‚Ä¢ This is Discord's native structure"
      },
      "typeVersion": 1
    },
    {
      "id": "6936190f-3147-4aa8-af8b-cb2fc60f77d3",
      "name": "Sticky Note13",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1456,
        -320
      ],
      "parameters": {
        "width": 400,
        "height": 400,
        "content": "### **Extend \"Next Step !\" Placeholder:**\n  Current workflow stops at data merging. You can add:\n  \n  üí¨ Send Messages to All Channels:\n     ‚Ä¢ Add \"Split In Batches\" after Merge\n     ‚Ä¢ Add \"Discord: Send message\" inside loop\n     ‚Ä¢ Use ={{ $json.channe_id }} (note the typo!)\n  \n  üìä Export to Spreadsheet:\n     ‚Ä¢ Add \"Google Sheets\" or \"Excel\" node\n     ‚Ä¢ Map fields: channel_name, category_name, etc.\n     ‚Ä¢ Great for server documentation\n  \n  üîç Fetch Last Messages:\n     ‚Ä¢ Add IF node: Check last_message_id not empty\n     ‚Ä¢ Add \"Discord: Get message\" node\n     ‚Ä¢ Use ={{ $json.last_message_id }}\n  \n  üéØ Category-Based Actions:\n     ‚Ä¢ Add Switch node based on category_name\n     ‚Ä¢ Route to different actions per category\n     ‚Ä¢ Example: Announcements ‚Üí Log, Support ‚Üí Alert"
      },
      "typeVersion": 1
    }
  ],
  "pinData": {},
  "connections": {
    "Merge": {
      "main": [
        [
          {
            "node": "Next Step !",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Next Step !": {
      "main": [
        []
      ]
    },
    "Get Channels": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set - Server ID": {
      "main": [
        [
          {
            "node": "Get channels list",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get channels list": {
      "main": [
        [
          {
            "node": "Separate Category & Channel",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Server's Categories": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Separate Category & Channel": {
      "main": [
        [
          {
            "node": "Get Channels",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get Server's Categories",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When Executed by Another Workflow": {
      "main": [
        [
          {
            "node": "Set - Server ID",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When clicking ‚ÄòExecute workflow‚Äô": {
      "main": [
        [
          {
            "node": "Set - Server ID",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}